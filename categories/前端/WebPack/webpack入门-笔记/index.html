<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/avatar32.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/avatar32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/avatar32.png"><link rel="mask-icon" href="/images/avatar.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.loli.net/css?family=EB Garamond:300,300italic,400,400italic,700,700italic|Cinzel Decorative:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"7.8.0",exturl:!1,sidebar:{position:"right",width:200,display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!1,style:"default"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!1,pangu:!1,algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideRightIn"}},sidebarPadding:40}</script><script data-ad-client="ca-pub-1414767122267457" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta name="description" content="介绍什么是WebPack现在的很多网页其实可以看做是功能丰富的应用，它们拥有着复杂的JavaScript代码和一大堆依赖包。WebPack可以看做是模块打包机：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Scss，TypeScript等），并将其转换和打包为合适的格式供浏览器使用。"><meta property="og:type" content="article"><meta property="og:title" content="webpack入门-笔记"><meta property="og:url" content="https://linxiaoki.github.io/categories/%E5%89%8D%E7%AB%AF/WebPack/webpack%E5%85%A5%E9%97%A8-%E7%AC%94%E8%AE%B0/index.html"><meta property="og:site_name" content="人间且慢行"><meta property="og:description" content="介绍什么是WebPack现在的很多网页其实可以看做是功能丰富的应用，它们拥有着复杂的JavaScript代码和一大堆依赖包。WebPack可以看做是模块打包机：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Scss，TypeScript等），并将其转换和打包为合适的格式供浏览器使用。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2019-11-11T00:00:00.000Z"><meta property="article:modified_time" content="2019-11-25T00:00:00.000Z"><meta property="article:author" content="我的名字"><meta property="article:tag" content="webpack"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://linxiaoki.github.io/categories/%E5%89%8D%E7%AB%AF/WebPack/webpack%E5%85%A5%E9%97%A8-%E7%AC%94%E8%AE%B0/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><link href="https://fonts.loli.net/css?family=Noto+Serif+SC:400,500,700&display=swap&subset=chinese-simplified" rel="stylesheet"><link href="https://fonts.loli.net/css?family=EB+Garamond:400,500,700&display=swap" rel="stylesheet"><link href="https://fonts.loli.net/css?family=Cinzel+Decorative&display=swap" rel="stylesheet"><link href="https://fonts.loli.net/css?family=Source+Code+Pro&display=swap" rel="stylesheet"><title>webpack入门-笔记 | 人间且慢行</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-168149316-1"></script><script data-pjax>function gtag(){dataLayer.push(arguments)}CONFIG.hostname===location.hostname&&(window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-168149316-1"))</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">人间且慢行</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><a href="https://github.com/linxiaoki" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg style="fill:#008b8b" width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://linxiaoki.github.io/categories/%E5%89%8D%E7%AB%AF/WebPack/webpack%E5%85%A5%E9%97%A8-%E7%AC%94%E8%AE%B0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="我的名字"><meta itemprop="description" content="一起滚月球吧·"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="人间且慢行"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">webpack入门-笔记</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019/11/11 00:00:00" itemprop="dateCreated datePublished" datetime="2019-11-11T00:00:00+00:00">2019/11/11</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2019/11/25 00:00:00" itemprop="dateModified" datetime="2019-11-25T00:00:00+00:00">2019/11/25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text"></span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/WebPack/" itemprop="url" rel="index"><span itemprop="name">WebPack</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>5.6k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><h3 id="什么是WebPack"><a href="#什么是WebPack" class="headerlink" title="什么是WebPack"></a>什么是WebPack</h3><p>现在的很多网页其实可以看做是功能丰富的应用，它们拥有着<strong>复杂</strong>的JavaScript代码和一大堆依赖包。<br>WebPack可以看做是<strong>模块打包</strong>机：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Scss，TypeScript等），并将其<strong>转换和打包为合适的格式</strong>供浏览器使用。<span id="more"></span></p><h3 id="WebPack和Grunt以及Gulp相比有什么特性"><a href="#WebPack和Grunt以及Gulp相比有什么特性" class="headerlink" title="WebPack和Grunt以及Gulp相比有什么特性"></a>WebPack和Grunt以及Gulp相比有什么特性</h3><p>没有太多的可比性</p><ul><li>Gulp/Grunt是一种能够优化前端的开发流程的工具</li><li>WebPack是一种模块化的解决方案（不过Webpack在很多场景下可以替代Gulp/Grunt）</li><li>Grunt和Gulp的工作方式是：在一个<strong>配置文件</strong>中，<strong>指明</strong>对某些文件进行类似<strong>编译，组合，压缩</strong>等任务的<strong>具体步骤</strong>，工具之后可以<strong>自动完成</strong>这些任务。</li><li>Webpack的工作方式是：把你的项目当做一个整体，<strong>通过</strong>一个给定的<strong>主文件</strong>（如：index.js），Webpack将从这个文件开始<strong>找到</strong>你的项目的所有<strong>依赖文件</strong>，使用loaders<strong>处理</strong>它们，最后<strong>打包</strong>为一个（或多个）浏览器可识别的JavaScript文件。</li></ul><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>webpack 编译，直接编译和使用配置文件(webpack.config.js，webpack4需要指定编译模式,)<br><br>或者在 packages.json 可以<strong>添加script</strong>来运行局部安装的模块 webpack( npm start)<br><br>文件夹：<br><br>编译目录（原文件）：<code>app =&gt; main.js, main.css, index.tmpl.html, Greeter.js, Greeter.css, config.json</code><br><br>生成目录（测试环境用）：<code>public =&gt; main.js, bundle.js</code><br><br>生成目录（生产环境用）：<code>build =&gt; main.js bundle-[hash].js</code><br></p><p><strong>配置</strong>(webpack.config.js)：</p><ul><li><code>devtool:eval-source-map</code>：开发环境的好选择。</li><li><code>mode: development|production</code></li><li>使用webpack来构建本地服务器(webpack-dev-server),在配置文件webpack.config.js 中配置。配置 package.json 的 script 来运行服务</li></ul><h2 id="Loaders"><a href="#Loaders" class="headerlink" title="Loaders"></a>Loaders</h2><p>通过使用不同的loader，webpack有能力调用外部的脚本或工具，实现对不同格式的文件的处理。（scss=&gt;css, js文件兼容，React的JSX=&gt;js）</p><h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><ul><li>Babel是一个编译JavaScript的平台，它可以编译代码帮你达到以下目的：<ul><li>让你能使用最新的JavaScript代码（ES6，ES7…），而不用管新标准是否被当前使用的浏览器完全支持；</li><li>让你能使用基于JavaScript进行了拓展的语言，比如React的JSX；</li><li>安装（Babel其实是几个模块化的包，其核心功能位于称为babel-core的npm包中，webpack可以把其不同的包整合在一起使用，对于每一个你需要的功能或拓展，你都需要安装单独的包（用得最多的是解析Es6的babel-env-preset包和解析JSX的babel-preset-react包）<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install </span>--save-dev <span class="keyword">babel-core </span><span class="keyword">babel-loader </span><span class="keyword">babel-preset-env </span><span class="keyword">babel-preset-react</span></span><br></pre></td></tr></table></figure>遇到问题：<br>自动下载时，babel-loader 版本为 8.x,需要babel-core 7.x的支持。所以重装一个babel-loader@7 好了。</li></ul></li></ul><p>babel 配置可以放在 webpack.config.js 中，只不过太多，所以一般单独建立一个文件夹。</p><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="处理CSS（style-loader-css-loader）"><a href="#处理CSS（style-loader-css-loader）" class="headerlink" title="处理CSS（style-loader, css-loader）"></a>处理CSS（style-loader, css-loader）</h3><ul><li>配置<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">loader</span>: style-loader</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">loader</span>: css-loader</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// webpack读取loader的时候是从右到左</span></span><br><span class="line"><span class="comment">// 所以 css-loader 放在 style-loader 之后，不然会出现 CssSyntaxErro 错误</span></span><br><span class="line"><span class="comment">// css-loader 解析css文件，style-loader 放到 html 文件</span></span><br></pre></td></tr></table></figure></li><li>新建文件 main.css</li><li>在 main.js 当成模块导入</li></ul><h3 id="CSS-module"><a href="#CSS-module" class="headerlink" title="CSS module"></a>CSS module</h3><p><code>CSS modules</code>的技术意在把JS的模块化思想带入CSS中来，通过CSS模块，所有的类名，动画名默认都<strong>只作用于当前模块</strong>。<br><br>&nbsp;&ensp;Webpack对CSS模块化提供了非常好的支持，只需要在CSS loader中进行简单配置即可，然后就可以直接把CSS的类名传递到组件的代码中，这样做有效<strong>避免了全局污染</strong>。</p><ul><li>配置（css-loader@3 参数不一样了）<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">options:</span>&#123;</span><br><span class="line"><span class="symbol">    modules:</span>&#123;</span><br><span class="line"><span class="symbol">        localIdentify:</span>[name]__[local]--[hash:base64:<span class="number">5</span>]    <span class="comment">// 类名格式</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>使用：新建 css 文件，js文件中导入css，通过 <code>className=&#123;styles.root&#125;</code>使用。</li></ul><h3 id="CSS预处理器"><a href="#CSS预处理器" class="headerlink" title="CSS预处理器"></a>CSS预处理器</h3><p>Sass 和 Less 之类的预处理器是对<strong>原生CSS的拓展</strong>，它们允许你使用类似于variables, nesting, mixins, inheritance等不存在于CSS中的特性来写CSS，CSS预处理器可以<strong>将这些特殊类型的语句转化为浏览器可识别的CSS语句</strong>。常用CSS处理的loader:</p><ul><li><code>Less Loader</code></li><li><code>Sass Loader</code></li><li><code>Stylus Loader</code><br>不过其实也存在一个CSS的处理平台-PostCSS，它可以帮助你的CSS实现更多的功能。<strong>（啥意思）</strong>使用PostCSS来为CSS代码<strong>自动添加适应不同浏览器的CSS前缀</strong>。</li><li>配置(下载postcss-loader,autoprefixer)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">webpack.config.js 配置文件添加 postcss-loader</span><br><span class="line"><span class="comment">//新建文件 postcss.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>处理Js的 Bebel 和处理Css的PostCss其实是两个基本平台，配合<code>webpack</code>可以很好的发挥它们的作用。</p><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><h3 id="常见插件"><a href="#常见插件" class="headerlink" title="常见插件"></a>常见插件</h3><h4 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h4><p>依据一个简单的index.html模板，生成一个自动引用你打包后的JS文件的新index.html。这在每次生成的js文件名称不同时非常有用（比如添加了hash值）。</p><ul><li>安装（html-webpack-plugin)和配置<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = require(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line">moudle.<span class="keyword">export</span></span><br><span class="line">  moudle</span><br><span class="line">    output:&#123;</span><br><span class="line">        <span class="comment">//把 public 改成 build ,会生成 build： bundle.js + index.html 文件</span></span><br><span class="line">        path: __dirname + <span class="string">&quot;/build&quot;</span>，  </span><br><span class="line">        filename: <span class="string">&quot;bundle.js&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  plugins:[</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">          template: __dirname + <span class="string">&quot;/app/index.tmpl.html&quot;</span> <span class="comment">//模板文件</span></span><br><span class="line">      &#125;)</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure></li></ul><h4 id="Hot-Module-Replacement（HML，热加载"><a href="#Hot-Module-Replacement（HML，热加载" class="headerlink" title="Hot Module Replacement（HML，热加载)"></a>Hot Module Replacement（HML，热加载)</h4><p>它允许你在修改组件代码后，自动刷新实时预览修改后的效果。</p><ol><li>在webpack配置文件中添加HMR插件；</li><li>在Webpack Dev Server中添加“hot”参数；</li></ol><p>它是WepPack模块，在 JS 模块中执行WebPack提供的API就可以实现热加载。对于 <strong>React</strong> 模块，使用 <strong>Babel</strong> 可以<strong>更方便</strong>的实现功能热加载。<br><br><strong>react-transform-hrm</strong>插件，可以在不对React模块进行额外的配置的前提下让HMR正常工作。</p><h2 id="产品阶段的构建"><a href="#产品阶段的构建" class="headerlink" title="产品阶段的构建"></a>产品阶段的构建</h2><p>在产品阶段，可能还需要对打包的文件进行额外的处理，比如说<strong>优化，压缩，缓存以及分离CSS和JS</strong>。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>新建文件webpack.production.config.js</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>不需要 setNode，除非配置文件里：</span><br><span class="line"><span class="regexp">//</span>  mode: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;production&#x27;</span> : <span class="string">&#x27;development&#x27;</span></span><br><span class="line"><span class="string">&quot;build&quot;</span>: <span class="string">&quot;set NODE_ENV=production &amp;&amp; webpack --config ./webpack.production.config.js --progress&quot;</span></span><br><span class="line"><span class="regexp">//</span>可以直接使用：</span><br><span class="line">webpack --config ./webpack.build.config.js</span><br></pre></td></tr></table></figure><h2 id="优化插件"><a href="#优化插件" class="headerlink" title="优化插件"></a>优化插件</h2><ul><li><p><code>OccurenceOrderPlugin</code>:内置插件，为组件分配ID</p></li><li><p><code>UglifyJsPlugin</code>:<br><br>现在也不需要使用这个plugin了，只需要使用optimization.minimize为true就行，production mode下面<strong>自动为true</strong></p></li><li><p><code>ExtractTextPlugin</code>: 分离CSS和JS文件<br><br>extract-text-webpack-plugin还不能支持webpack4.0.0以上的版本。 所以需要指定下载测试版<code>extract-text-webpack-plugin@next</code></p><h2 id="缓存-并且取出-build-文件中的残余文件"><a href="#缓存-并且取出-build-文件中的残余文件" class="headerlink" title="缓存 并且取出 build 文件中的残余文件"></a>缓存 并且取出 build 文件中的残余文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;CleanWebpackPlugin&#125; = <span class="built_in">require</span>(<span class="string">&quot;clean-webpack-plugin&quot;</span>);</span><br><span class="line">    <span class="function"><span class="params">output</span> =&gt;</span> filename: <span class="string">&quot;bundle-[hash].js&quot;</span></span><br><span class="line">    plugins</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin()</span><br></pre></td></tr></table></figure><p>webpack4：<br>mode需要添加<br>loader 添加rules</p></li></ul><p>webpack 是把所有文件当作模块处理，JS代码、Css、fonts 以及图片等都可以通过合适的 loader 处理。</p><p>npm prune</p><h3 id="使用过程遇到的问题"><a href="#使用过程遇到的问题" class="headerlink" title="使用过程遇到的问题"></a>使用过程遇到的问题</h3><ul><li><p>通过script引入jquery文件后，需要怎么配置<br><br><a target="_blank" rel="noopener" href="https://juejin.im/post/5c3c80e4f265da612c5e1aad">webpack引入第三方库的方式，以及注意事项</a><br><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007249293">webpack进阶教程（二）——webpack引入jquery多种方法探究</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>webapack.config.js</span><br><span class="line">externals: &#123;</span><br><span class="line">    jquery: <span class="string">&#x27;window.$&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="regexp">//</span> 使用</span><br><span class="line">import jquery from <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line"></span><br><span class="line">----------------------</span><br><span class="line">或者直接使用 $ 或 jQuery, 因为通过cdn引入已经是全局变量了</span><br></pre></td></tr></table></figure></li><li><p><a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000012317392">用到jsonp的js文件用webpack打包后为何失效？</a>: 回调函数必须全局</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义全局函数,  使用回调 （不能 var 局部声明！）</span></span><br><span class="line">f1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  &#125;</span><br><span class="line">creatElement(<span class="string">&#x27;scrpt&#x27;</span>).src=<span class="string">&quot;....?callback=mycallbacks&quot;</span> 或者 $.ajax( dataType:<span class="string">&#x27;jsonp&#x27;</span>,<span class="attr">jsonp</span>:<span class="string">&#x27;callback&#x27;</span>,  <span class="attr">callback</span>: <span class="string">&quot;mycallback&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接在 ajax 写入方法 （其实也可以直接写方法名）</span></span><br><span class="line">functionName</span><br><span class="line">$.ajax( <span class="keyword">type</span>:<span class="string">&quot;GET&quot;</span>,<span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,  <span class="attr">success</span>: <span class="function"><span class="title">funfunction</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br></pre></td></tr></table></figure></li><li><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6120a4e3c875">webpack-dev-server跨域请求数据的问题</a></p></li><li><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/camille666/p/webpack_picture.html">不同文件中引入图片的方式不同</a> | <a target="_blank" rel="noopener" href="https://www.timsrc.com/article/16/loading-images">加载图片</a> | <a target="_blank" rel="noopener" href="https://www.cnblogs.com/luckyXcc/p/10864255.html">url-loader 是 file-loader 增强版</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> webpack.config.js  添加 url-loader</span><br><span class="line"><span class="regexp">//</span> js 文件中使用 var img = require(<span class="string">&quot;./img.png&quot;</span>) 导入</span><br></pre></td></tr></table></figure></li></ul><h3 id="包的作用"><a href="#包的作用" class="headerlink" title="包的作用"></a>包的作用</h3><h4 id="loaders（桥梁？充当中间件？）"><a href="#loaders（桥梁？充当中间件？）" class="headerlink" title="loaders（桥梁？充当中间件？）"></a>loaders（桥梁？充当中间件？）</h4><p>通过使用不同的loader, webpack 可以调用外部的脚本或工具，实现不同格式的文件的处理。比如把scss 转 css，把高版本（ES6,ES7）的JS文件转换为浏览器兼容的JS文件，把React用到的JSX文件转换为JX文件。</p><h4 id="babel（执行转换？）"><a href="#babel（执行转换？）" class="headerlink" title="babel（执行转换？）"></a>babel（执行转换？）</h4><p>Babel是一个编译JavaScript的平台，（在转换的过程中扮演转换者的角色？ <code>JSX=&gt;jx, scss=&gt;css, jx(es7)=&gt;jx</code>）</p><p>babel 是几个模块化的包，核心功能在<code>babel-core</code>的npm包中，webpack 可以把它不同的包整合在仪器使用，对于需要的功能或者扩展，都需要安装单独的包。</p><ul><li><code>@babel/preset-env</code>: 解析 Es6 语法</li><li><code>@babel/preset-react</code>: react 的转码规则集, 解析React 的 JSX 文件( 就可以使用 jsx 语法去创建dom节点的)</li><li><code>React</code>：React包，可以生成虚拟 dom 节点</li><li><code>React-dom</code>: 将虚拟Dom渲染到文档中变成实际dom，…</li></ul><h3 id="插件-1"><a href="#插件-1" class="headerlink" title="插件"></a>插件</h3><ul><li>html-webpack-plugin</li><li>extract-text-webpack-plugin: 提取所有css，生成 main.css</li><li>@babel/plugin-transform-runtime</li></ul><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/42e11515c10f">webpack入门，主要参考</a></p><p>其他：<br><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zwkkkk1/article/details/88758726">webpack-devtool配置相关</a><br><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zgd826237710/article/details/87362353">生产环境下webpack的配置</a></p></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------end-------------</div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/webpack/" rel="tag"><i class="fa fa-tag"></i> webpack</a></div><div class="post-nav"><div class="post-nav-item"><a href="/categories/WebGIS/%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0/webgis-%E6%95%99%E7%A8%8B-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%EF%BC%9F/" rel="prev" title="webgis 教程-目录结构？"><i class="fa fa-chevron-left"></i> webgis 教程-目录结构？</a></div><div class="post-nav-item"><a href="/categories/WebGIS/%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0/%E7%9F%A5%E4%B9%8E%E4%B8%93%E6%A0%8Fwebgis%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0/" rel="next" title="知乎专栏webgis教程笔记">知乎专栏webgis教程笔记 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments"><script src="https://utteranc.es/client.js" repo="linxiaoki/comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:e}=CONFIG.comments;if(CONFIG.comments.storage&&(e=localStorage.getItem("comments_active")||e),e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFWebPack"><span class="nav-number">1.1.</span> <span class="nav-text">什么是WebPack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WebPack%E5%92%8CGrunt%E4%BB%A5%E5%8F%8AGulp%E7%9B%B8%E6%AF%94%E6%9C%89%E4%BB%80%E4%B9%88%E7%89%B9%E6%80%A7"><span class="nav-number">1.2.</span> <span class="nav-text">WebPack和Grunt以及Gulp相比有什么特性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%AF%91"><span class="nav-number">2.</span> <span class="nav-text">编译</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Loaders"><span class="nav-number">3.</span> <span class="nav-text">Loaders</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Babel"><span class="nav-number">3.1.</span> <span class="nav-text">Babel</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS"><span class="nav-number">4.</span> <span class="nav-text">CSS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%84%E7%90%86CSS%EF%BC%88style-loader-css-loader%EF%BC%89"><span class="nav-number">4.1.</span> <span class="nav-text">处理CSS（style-loader, css-loader）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS-module"><span class="nav-number">4.2.</span> <span class="nav-text">CSS module</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">4.3.</span> <span class="nav-text">CSS预处理器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6"><span class="nav-number">5.</span> <span class="nav-text">插件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E6%8F%92%E4%BB%B6"><span class="nav-number">5.1.</span> <span class="nav-text">常见插件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HtmlWebpackPlugin"><span class="nav-number">5.1.1.</span> <span class="nav-text">HtmlWebpackPlugin</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hot-Module-Replacement%EF%BC%88HML%EF%BC%8C%E7%83%AD%E5%8A%A0%E8%BD%BD"><span class="nav-number">5.1.2.</span> <span class="nav-text">Hot Module Replacement（HML，热加载)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%A7%E5%93%81%E9%98%B6%E6%AE%B5%E7%9A%84%E6%9E%84%E5%BB%BA"><span class="nav-number">6.</span> <span class="nav-text">产品阶段的构建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E6%8F%92%E4%BB%B6"><span class="nav-number">7.</span> <span class="nav-text">优化插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%93%E5%AD%98-%E5%B9%B6%E4%B8%94%E5%8F%96%E5%87%BA-build-%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%AE%8B%E4%BD%99%E6%96%87%E4%BB%B6"><span class="nav-number">8.</span> <span class="nav-text">缓存 并且取出 build 文件中的残余文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">8.1.</span> <span class="nav-text">使用过程遇到的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">8.2.</span> <span class="nav-text">包的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#loaders%EF%BC%88%E6%A1%A5%E6%A2%81%EF%BC%9F%E5%85%85%E5%BD%93%E4%B8%AD%E9%97%B4%E4%BB%B6%EF%BC%9F%EF%BC%89"><span class="nav-number">8.2.1.</span> <span class="nav-text">loaders（桥梁？充当中间件？）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#babel%EF%BC%88%E6%89%A7%E8%A1%8C%E8%BD%AC%E6%8D%A2%EF%BC%9F%EF%BC%89"><span class="nav-number">8.2.2.</span> <span class="nav-text">babel（执行转换？）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6-1"><span class="nav-number">8.3.</span> <span class="nav-text">插件</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="我的名字" src="/images/avatar.gif"><p class="site-author-name" itemprop="name">我的名字</p><div class="site-description" itemprop="description">一起滚月球吧·</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">101</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">44</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">64</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/linxiaoki" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;linxiaoki" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">我的名字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span title="站点总字数">221k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">3:21</span></div></div></footer></div><script color="0,134,139" opacity="0.6" zindex="22" count="199" src="/js/src/canvas-nest-nomobile.min.js"></script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script>var pjax=new Pjax({selectors:["head title","#page-configurations",".content-wrap",".post-toc-wrap",".languages","#pjax"],switches:{".post-toc-wrap":Pjax.switches.innerHTML},analytics:!1,cacheBust:!1,scrollTo:!CONFIG.bookmark.enable});window.addEventListener("pjax:success",()=>{document.querySelectorAll("script[data-pjax], script#page-configurations, #pjax script").forEach(e=>{var t=e.text||e.textContent||e.innerHTML||"",a=e.parentNode;a.removeChild(e);var s=document.createElement("script");e.id&&(s.id=e.id),e.className&&(s.className=e.className),e.type&&(s.type=e.type),e.src&&(s.src=e.src,s.async=!1),void 0!==e.dataset.pjax&&(s.dataset.pjax=""),""!==t&&s.appendChild(document.createTextNode(t)),a.appendChild(s)}),NexT.boot.refresh(),CONFIG.motion.enable&&NexT.motion.integrator.init().add(NexT.motion.middleWares.subMenu).add(NexT.motion.middleWares.postList).bootstrap(),NexT.utils.updateSidebarPosition()})</script><script src="/js/local-search.js"></script><div id="pjax"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"left",vOffset:-75,hOffset:10,width:200,height:385},mobile:!1,react:{opacity:.7},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>